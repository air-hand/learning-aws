{
    "name": "AWS Terraform",
    "dockerComposeFile": "./docker-compose.yml",
    "service": "dev",
    "workspaceFolder": "/work",
//    "mounts": [
        // MEMO: --mountで実行されるが、一部環境(Docker Desktop + WSL2?)の場合はホストに存在しなくてもエラーにならずにディレクトリを作成してしまう
        // https://github.com/docker/for-win/issues/10422
//        "type=bind,source=${localEnv:HOME}/.aws,target=/root/.aws,consistency=cached",
//        "type=bind,source=${localEnv:HOME}/.aws,target=//.aws,consistency=cached",
//        "type=bind,source=${localEnv:HOME}/.config/gh,target=/root/.config/gh,consistency=cached",
//        "type=bind,source=/var/run/docker.sock,target=/var/run/docker.sock",
//    ],
    "initializeCommand": "PROJECTNAME=${localWorkspaceFolderBasename} bash .devcontainer/initialize.sh",
    "postStartCommand": "pre-commit install",
    "customizations": {
        "vscode": {
            "extensions": [
                "hashicorp.terraform",
                "editorconfig.editorconfig",
                "eamodio.gitlens",
                "bierner.markdown-mermaid",
                "github.copilot",
            ],
            "settings": {
                "editor.suggest.preview": true,
                "aws.telemetry": false,
                "terraform.languageServer.terraform.path": "/usr/local/bin/terraform",
                "terraform.experimentalFeatures.prefillRequiredFields": true,
                "terraform.telemetryLevel": "off",
            }
        }
    },
    // https://hub.docker.com/_/microsoft-vscode-devcontainers
//    "image": "mcr.microsoft.com/devcontainers/base:bullseye",
    "features": {
        // TODO: fetchが安定するようになったら有効化を検討
//        "ghcr.io/devcontainers/features/aws-cli:1": {},
//        "ghcr.io/devcontainers/features/terraform:1": {
//            "version": "1.3.2",
//            "tflint": "0.41.0",
//            "installTFsec": true,
//        },
//        "ghcr.io/devcontainers/features/git:latest": {},
//        "ghcr.io/devcontainers/features/github-cli:1": {}
    },
    "shutdownAction": "stopCompose"
}
